webpackJsonp([2],{"+SqG":function(e,t){},"1kXz":function(e,t){},"1yV6":function(e,t,n){var l=n("FHqv"),a=n("hgbu")("iterator"),o=n("yYxz");e.exports=n("iANj").getIteratorMethod=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||o[l(e)]}},"2NXm":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("BO1k"),a=n.n(l),o=n("dQKT"),i=n.n(o),r={data:function(){return{treeDataSource:i.a,treeColumns:[{key:1,name:"组织名称",fieldName:"org_name",minWidth:380,maxWidth:500,mainAccountSlotName:"mainAccount"},{key:2,name:"子账号数量(个)",fieldName:"sub_account_total",minWidth:130,expandFunc:!0},{key:3,name:"操作",fieldName:"operate",minWidth:290,slotName:"treeOperate"}],tableColumns:[{key:1,name:"子账号名称",fieldName:"sub_account_user_name",minWidth:200,showTooltip:!0},{key:2,name:"显示名",fieldName:"sub_account_display_name",minWidth:200,showTooltip:!0},{key:3,name:"关联状态",fieldName:"sub_account_relation_status",minWidth:90,showTooltip:!1},{key:4,name:"关联时间",fieldName:"sub_account_relation_time",minWidth:140,showTooltip:!1},{key:5,name:"操作",fieldName:"operate",minWidth:160,showTooltip:!1,slotName:"tableOperate"}],childrenAlias:"sub_account_list"}},components:{treeGrid:n("9cZW").a},methods:{deepTraversal:function(e){if(e.isExpand=!1,e.children&&e.children.length>0){var t=e.children,n=!0,l=!1,o=void 0;try{for(var i,r=a()(t);!(n=(i=r.next()).done);n=!0){var s=i.value;this.deepTraversal(s)}}catch(e){l=!0,o=e}finally{try{!n&&r.return&&r.return()}finally{if(l)throw o}}}},handlerFold:function(e){console.log("展开/折叠"),e.isFold=!e.isFold,e.isFold||this.deepTraversal(e)},handlerExpand:function(e){console.log("扩展/收起"),e.isExpand=!e.isExpand},handlerData:function(e){var t=[],n=5;return function l(a,o){if(a<=0)return!1;var i=Math.min(a,n);window.requestAnimationFrame(function(){for(var n=0;n<i;n++)t.push(e[o+n]);l(a-i,o+i)})}(e.length,0),t}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"omc-common-css contains"},[n("tree-grid",{ref:"recTree",attrs:{list:e.treeDataSource,treeColumnList:e.treeColumns,columnList:e.tableColumns,tableListName:e.childrenAlias},on:{"update:list":function(t){e.treeDataSource=t},handlerFold:e.handlerFold,handlerExpand:e.handlerExpand},scopedSlots:e._u([{key:"mainAccount",fn:function(){return[n("i",{staticClass:"tree-account"},[e._v("\n          【主账号: SPgmdd】\n        ")])]},proxy:!0},{key:"treeOperate",fn:function(){return[n("el-button",{attrs:{type:"text"}},[e._v("添加子账号")]),e._v(" "),n("el-button",{attrs:{type:"text"}},[e._v("修改")]),e._v(" "),n("el-button",{attrs:{type:"text"}},[e._v("删除组织")])]},proxy:!0},{key:"extendTable",fn:function(t){return[n("el-table",{staticClass:"show-border",staticStyle:{width:"90%"},style:t.data.children&&t.data.children.length>0?"margin-left: 13px":"",attrs:{data:e.handlerData(t.data.sub_account_list),border:"",lazy:"","max-height":470}},e._l(e.tableColumns,function(t){return n("el-table-column",{key:t.key,attrs:{prop:t.fieldName,label:t.name,"min-width":t.minWidth,"show-overflow-tooltip":t.showTooltip},scopedSlots:e._u([{key:"default",fn:function(l){return[t.slotName?e._e():n("span",[e._v("\n              "+e._s(l.row[t.fieldName])+"\n              ")]),e._v(" "),t.slotName?e._t(t.slotName,function(){return[n("el-button",{attrs:{type:"text"}},[e._v("解除关联")]),e._v(" "),n("el-button",{attrs:{type:"text"}},[e._v("变更组织")])]},{data:l.row}):e._e()]}}],null,!0)})}),1)]}}])},[e._v("\n    >\n      ")])],1)},staticRenderFns:[]};var d=n("VU/8")(r,s,!1,function(e){n("+SqG")},"data-v-e2f5bc96",null);t.default=d.exports},"9cZW":function(e,t,n){"use strict";var l=n("mvHQ"),a=n.n(l),o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.tdClass},[0!==e.root&&1!==e.nodes?n("span",{staticClass:"before-line",style:{left:e.model.bLeft+"px"}}):e._e(),e._v(" "),n("table",[n("tr",[n("td",{attrs:{colspan:e.colSpan}},[n("table",[n("tr",{staticClass:"level",class:e.levelClass},[n("td",{staticClass:"td1"},[n("div",{staticClass:"td-title"},[n("div",[e.model.children&&e.model.children.length>0?n("i",{class:"zk-table--tree-icon zk-icon "+(e.model.isFold?"zk-icon-minus-square-o zk-shield":"zk-icon-plus-square-o"),on:{click:function(t){return e.handlerFold(e.model)}}}):e._e(),e._v(" "),n("div",{staticClass:"tree-row"},e._l(e.treeColumnList,function(t){return n("div",{key:t.key,staticClass:"tree-column",style:e.treeColumnRender(t,e.model)},[[t.slotName?e._e():n("span",{staticClass:"node-title",style:{width:t.expandFunc?"40px":"auto"}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(e.model[t.fieldName])),t.mainAccountSlotName&&1===e.model.level?e._t(t.mainAccountSlotName,null,{data:e.model}):e._e()],2),e._v(" "),t.expandFunc&&e.model[e.tableListName]&&e.model[e.tableListName].length>0?n("div",{staticClass:"zk-table__cell-inner zk-table--expand-inner",class:{"zk-table--expanded-inner":e.model.isExpand},on:{click:function(t){return e.handlerExpand(e.model)}}},[n("i",{staticClass:"zk-icon zk-icon-angle-right"})]):e._e(),e._v(" "),t.slotName?e._t(t.slotName,null,{data:e.model}):e._e()]],2)}),0),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.model.isExpand&&e.model[e.tableListName].length>0,expression:"model.isExpand && model[tableListName].length > 0"}],staticClass:"extend-table",style:e.tableRowRender},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.model.isFold&&e.model.isExpand&&e.model.children.length>0,expression:"model.isFold && model.isExpand && model.children.length > 0"}],staticClass:"level-line"}),e._v(" "),e._t("extendTable",null,{data:e.model})],2)])])])])])])])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.model.isFold,expression:"model.isFold"}],staticClass:"other-node",class:e.otherNodeClass},e._l(e.model.children,function(t,l){return n("tree-unit",{key:String("child_node"+l),attrs:{num:l,root:1,nodes:e.model[e.tableListName].length,trees:e.trees,model:t,treeColumnList:e.treeColumnList,columnList:e.columnList,tableListName:e.tableListName},on:{handlerFold:e.handlerFold,handlerExpand:e.handlerExpand,"update:nodes":function(t){return e.$set(e.model[e.tableListName],"length",t)},"update:trees":function(t){e.trees=t}},scopedSlots:e._u([{key:"extendTable",fn:function(t){return[e._t("extendTable",null,{data:t.data})]}},e._l(e.treeColumnList,function(t){return{key:t.slotName,fn:function(n){return[e._t(t.slotName,null,{data:n.data})]}}}),e._l(e.treeColumnList,function(t){return{key:t.mainAccountSlotName,fn:function(n){return[e._t(t.mainAccountSlotName,null,{data:n.data})]}}})],null,!0)})}),1)])},staticRenderFns:[]};var i={name:"treeGrid",props:["list","treeColumnList","columnList","tableListName"],data:function(){return{treeDataSource:[]}},watch:{list:{handler:function(){this.initTreeData()},deep:!0}},computed:{},methods:{treeHeaderRender:function(e,t,n){return t!==n.length-1?{"flex-basis":e.minWidth+"px"||"100px","min-width":e.minWidth+"px"||"100px","max-width":e.maxWidth+"px"||"500px"}:{"flex-basis":e.minWidth+"px"||"100px","min-width":e.minWidth+"px"||"100px","max-width":e.maxWidth+"px"||"500px","padding-left":"80px"}},initTreeData:function(){console.log("处理前的:",JSON.parse(a()(this.list)));var e=JSON.parse(a()(this.list));!function e(t,n){t.map(function(t,l){t.isFold=!0,t.isExpand=!0,t.children=t.children||[],t.level=n,t.bLeft=1===n?65:14*(n-2)+65,t.Experience=t.Experience||"无",t.children.length>0&&e(t.children,n+1)})}(e,1),console.log("处理后的:",e),this.treeDataSource=e},getMore:function(){alert("滚动到底部加载更多"),$("#scrollWrap").mCustomScrollbar("scrollTo","top",{scrollInertia:0})},handlerFold:function(e){this.$emit("handlerFold",e)},handlerExpand:function(e){this.$emit("handlerExpand",e)}},components:{"tree-unit":n("VU/8")({name:"treeUnit",props:["model","num","nodes","root","trees","treeColumnList","columnList","tableListName"],data:function(){return{parentNodeModel:null}},computed:{colSpan:function(){return 0===this.root?"":6},tdClass:function(){return 0===this.root?"td-border":"not-border"},levelClass:function(){return this.model?"level-"+this.model.level:""},childNodeClass:function(){return 0===this.root?"":"child-node"},otherNodeClass:function(){return this.model?"other-node-"+this.model.level:""},tableRowRender:function(){return{"padding-top":"20px","padding-bottom":"20px","margin-left":15*-(this.model.level-1)-54+"px","padding-left":65+15*(this.model.level-1)+"px","background-color":"#f4f6fa"}}},watch:{},methods:{columnRender:function(e,t){return 1===e.key?t.children&&t.children.length>0?"26px":"12px":"0px"},treeColumnRender:function(e,t){return{"flex-basis":2!==e.key?e.minWidth-14*(t.level-1)+"px":e.minWidth+13*(t.level-1)+"px","min-width":2!==e.key?e.minWidth-14*(t.level-1)+"px":e.minWidth+13*(t.level-1)+"px",display:e.expandFunc?"flex":"inline-block","padding-left":this.columnRender(e,t),"padding-right":3===e.key?"30px":"0","text-align":3===e.key?"right":"left","text-overflow":"ellipsis"}},getParentNode:function(e){var t=this;!function n(l,a){l.forEach(function(l){l.id===e.id&&(t.parentNodeModel=a),l.children&&n(l.children,l)})}(this.trees,this.trees)},handlerFold:function(e){this.$emit("handlerFold",e)},handlerExpand:function(e){this.$emit("handlerExpand",e)}},filters:{formatDate:function(e){return e}}},o,!1,function(e){n("bLT1")},null,null).exports},mounted:function(){var e=this;e.$nextTick(function(){e.initTreeData()})}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tree-grid"},[n("div",{staticClass:"tree-head"},[n("table",[n("tr",e._l(e.treeColumnList,function(t,l){return n("th",{key:t.key,class:"th"+(l+1),style:e.treeHeaderRender(t,l,e.treeColumnList)},[e._v("\n          "+e._s(t.name)+"\n        ")])}),0)])]),e._v(" "),n("div",{staticClass:"tree-wrap",attrs:{id:"scrollWrap"}},[n("div",{staticClass:"tree-body"},[e.treeDataSource.length>0?n("table",[n("tbody",[n("tr",[n("td",e._l(e.treeDataSource,function(t,l){return n("tree-unit",{key:"root_node_"+l,attrs:{root:0,num:l,nodes:e.treeDataSource.length,trees:e.treeDataSource,model:t,treeColumnList:e.treeColumnList,columnList:e.columnList,tableListName:e.tableListName},on:{handlerFold:e.handlerFold,handlerExpand:e.handlerExpand,"update:trees":function(t){e.treeDataSource=t}},scopedSlots:e._u([e._l(e.treeColumnList,function(t){return{key:t.slotName,fn:function(n){return[e._t(t.slotName,null,{data:n.data})]}}}),e._l(e.treeColumnList,function(t){return{key:t.mainAccountSlotName,fn:function(n){return[e._t(t.mainAccountSlotName,null,{data:n.data})]}}}),{key:"extendTable",fn:function(t){return[e._t("extendTable",null,{data:t.data})]}}],null,!0)})}),1)])])]):e._e()])])])},staticRenderFns:[]};var s=n("VU/8")(i,r,!1,function(e){n("1kXz")},null,null);t.a=s.exports},BO1k:function(e,t,n){e.exports={default:n("oY0/"),__esModule:!0}},FHqv:function(e,t,n){var l=n("NZra"),a=n("hgbu")("toStringTag"),o="Arguments"==l(function(){return arguments}());e.exports=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?n:o?l(t):"Object"==(i=l(t))&&"function"==typeof t.callee?"Arguments":i}},St71:function(e,t,n){var l=n("FKWp"),a=n("1yV6");e.exports=n("iANj").getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return l(t.call(e))}},bLT1:function(e,t){},"oY0/":function(e,t,n){n("+3lO"),n("tz60"),e.exports=n("St71")}});
//# sourceMappingURL=2.09117bc73b3500c0cda5.js.map